<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü©∏ Calculadora Perfusionista PRO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0f766e;
            --primary-dark: #065f46;
            --secondary: #14b8a6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --border: #334155;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1a2332 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 20px 60px rgba(15, 118, 110, 0.3);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .tabs-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            background: var(--bg-card);
            padding: 10px;
            border-radius: 15px;
            border: 1px solid var(--border);
            overflow-x: auto;
        }

        .tab-btn {
            flex: 1;
            min-width: 110px;
            padding: 12px 16px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(15, 118, 110, 0.4);
        }

        .content { display: grid; gap: 30px; }
        .section { display: none; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 1024px) {
            .section-grid { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--secondary);
            box-shadow: 0 15px 40px rgba(20, 184, 166, 0.2);
        }

        .card-title {
            font-size: 1.4em;
            margin-bottom: 20px;
            color: var(--secondary);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            font-size: 1em;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--secondary);
            background: rgba(20, 184, 166, 0.1);
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.2);
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(15, 118, 110, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--secondary);
        }

        .results-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .result-box {
            background: rgba(20, 184, 166, 0.1);
            border: 2px solid var(--secondary);
            border-radius: 12px;
            padding: 20px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(20, 184, 166, 0.2);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .result-value {
            color: var(--secondary);
            font-weight: 700;
            font-size: 1.1em;
        }

        .result-item.highlight {
            background: rgba(20, 184, 166, 0.2);
            padding: 16px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .result-item.highlight .result-value {
            color: #10b981;
            font-size: 1.4em;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95em;
            color: var(--text-secondary);
        }

        .formula-box {
            background: rgba(15, 118, 110, 0.15);
            border: 2px solid var(--primary);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.8;
            color: var(--secondary);
            overflow-x: auto;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9em;
            margin-top: 15px;
            width: 100%;
            justify-content: center;
        }

        .status-badge.ok {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-badge.warning {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .status-badge.info {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border: 1px solid #3b82f6;
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 0.9em;
            border-top: 1px solid var(--border);
        }

        .drug-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .drug-step {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--secondary);
        }

        .drug-step strong {
            color: var(--secondary);
            display: block;
            margin-bottom: 5px;
        }

        .drug-warning {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--danger);
            color: #fca5a5;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .input-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .input-row-4 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .header { padding: 25px; }
            .header h1 { font-size: 1.8em; }
            .section-grid { grid-template-columns: 1fr; }
            .tabs-container { flex-direction: column; }
            .tab-btn { min-width: auto; }
            .button-group { flex-direction: column; }
            .btn { min-height: 44px; }
            .input-row, .input-row-3, .input-row-4 { grid-template-columns: 1fr; }
        }

        .analysis-section {
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .analysis-title {
            color: var(--success);
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .analysis-item {
            padding: 12px 0;
            border-bottom: 1px solid rgba(16, 185, 129, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .analysis-item:last-child {
            border-bottom: none;
        }

        .analysis-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .analysis-value {
            color: var(--success);
            font-weight: 700;
        }

        .status-badge.elevated {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .status-badge.critical {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ Calculadora Perfusionista PRO</h1>
            <p>C√°lculos precisos para cirurgias card√≠acas com CEC</p>
        </div>

        <div class="tabs-container">
            <button class="tab-btn active" onclick="showTab('hemodiluicao')">üíß Hemodilui√ß√£o</button>
            <button class="tab-btn" onclick="showTab('furosemida')">üíä Furosemida</button>
            <button class="tab-btn" onclick="showTab('manitol')">üß™ Manitol</button>
            <button class="tab-btn" onclick="showTab('eletrolitos')">‚ö° Eletrolitos</button>
            <button class="tab-btn" onclick="showTab('gasometria')">ü´Å Gasometria</button>
            <button class="tab-btn" onclick="showTab('canulas')">ü©∫ C√¢nulas</button>
            <button class="tab-btn" onclick="showTab('drogas')">üíâ Drogas</button>
        </div>

        <div class="content">
            <!-- HEMODILUI√á√ÉO -->
            <div id="hemodiluicao" class="section active">
                <div class="formula-box">
                    üìê F√≥rmula: VP = ((Ht Inicial / Ht Final) √ó VST) - VST | VST = Peso √ó 70 mL/kg
                </div>
                <div class="info-box">
                    ‚úÖ Ex: 60kg, Ht 30%‚Üí22%: VST=4200mL | VP=((30/22)√ó4200)-4200=1527mL ‚úì
                </div>
                <div class="section-grid">
                    <div class="card">
                        <div class="card-title">üìä Dados do Paciente</div>
                        <div class="input-group">
                            <label>Peso (kg)</label>
                            <input type="number" id="pesoHemo" placeholder="60" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>Hemat√≥crito Inicial (%)</label>
                            <input type="number" id="htInicial" placeholder="30" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>Hemat√≥crito Final Desejado (%)</label>
                            <input type="number" id="htFinal" placeholder="22" step="0.1">
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="calcularHemodiluicao()">Calcular</button>
                            <button class="btn btn-secondary" onclick="limparHemo()">Limpar</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">üìà Resultados</div>
                        <div class="results-container">
                            <div class="result-box">
                                <div class="result-item">
                                    <span class="result-label">Peso</span>
                                    <span class="result-value" id="pesohemoRes">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">VST</span>
                                    <span class="result-value" id="vst">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Ht Inicial</span>
                                    <span class="result-value" id="htInicialRes">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Ht Final</span>
                                    <span class="result-value" id="htFinalRes">--</span>
                                </div>
                                <div class="result-item highlight">
                                    <span class="result-label">üéØ VOLUME PERFUSATO</span>
                                    <span class="result-value" id="volumePerfusato">-- mL</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Perfusato/kg</span>
                                    <span class="result-value" id="perfusatoPerKg">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Seguran√ßa</span>
                                    <span class="result-value" id="faixaSeguranca">--</span>
                                </div>
                            </div>
                            <div id="statusHemo" class="status-badge"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FUROSEMIDA -->
            <div id="furosemida" class="section">
                <div class="info-box">
                    üíä Dose habitual: 40-80mg | Apresenta√ß√µes: 10mg/mL (ampola 10mL) | 40mg/2mL (ampola 2mL)
                </div>
                <div class="section-grid">
                    <div class="card">
                        <div class="card-title">üíä C√°lculo Furosemida</div>
                        <div class="input-group">
                            <label>Peso (kg)</label>
                            <input type="number" id="pesoFuro" placeholder="70" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>Apresenta√ß√£o Dispon√≠vel</label>
                            <select id="apresentacaoFuro">
                                <option value="10">10 mg/mL (ampola 10mL)</option>
                                <option value="20">40 mg/2mL (ampola 2mL)</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="calcularFurosemida()" style="flex: 1;">Calcular</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">üíä Resultado</div>
                        <div class="results-container">
                            <div class="result-box">
                                <div class="result-item">
                                    <span class="result-label">Dose Sugerida</span>
                                    <span class="result-value" id="doseHabitual">-- mg</span>
                                </div>
                                <div class="result-item highlight">
                                    <span class="result-label">Volume a Administrar</span>
                                    <span class="result-value" id="volumeFuro">-- mL</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Apresenta√ß√£o</span>
                                    <span class="result-value" id="apresentacaoRes">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Protocolo</span>
                                    <span class="result-value">40-80 mg / bolus</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MANITOL -->
            <div id="manitol" class="section">
                <div class="info-box">
                    üß™ Manitol: Diur√©tico osm√≥tico | Dose: 0.25-1 g/kg | Apresenta√ß√£o: 20% (200mg/mL)
                </div>
                <div class="section-grid">
                    <div class="card">
                        <div class="card-title">üß™ C√°lculo Manitol</div>
                        <div class="input-group">
                            <label>Peso (kg)</label>
                            <input type="number" id="pesoManitol" placeholder="70" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>Dose (g/kg) [0.25-1]</label>
                            <input type="number" id="doseManitol" placeholder="0.5" min="0.25" max="1" step="0.25">
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="calcularManitol()">Calcular</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">üß™ Resultado</div>
                        <div class="results-container">
                            <div class="result-box">
                                <div class="result-item">
                                    <span class="result-label">Peso</span>
                                    <span class="result-value" id="pesoManitolRes">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Dose Manitol</span>
                                    <span class="result-value" id="doseManitolRes">-- g</span>
                                </div>
                                <div class="result-item highlight">
                                    <span class="result-label">Volume 20%</span>
                                    <span class="result-value" id="volumeManitol">-- mL</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Apresenta√ß√£o</span>
                                    <span class="result-value">20% (200mg/mL)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ELETROLITOS -->
            <div id="eletrolitos" class="section">
                <div class="info-box">
                    ‚ö° Corre√ß√£o de Eletrolitos: Insira valores ATUAIS e ALVO desejado
                </div>
                <div class="section-grid">
                    <div class="card">
                        <div class="card-title">‚ö° Corre√ß√£o Eletrolitos</div>
                        <div class="input-group">
                            <label>Peso (kg)</label>
                            <input type="number" id="pesoEletro" placeholder="70" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>Selecione o Eletr√≥lito</label>
                            <select id="selectEletro" onchange="atualizarEletrolito()">
                                <option value="calcio">C√°lcio Gluconato 10%</option>
                                <option value="potassio">Pot√°ssio (KCl)</option>
                                <option value="magnesio">Magn√©sio (MgSO4)</option>
                                <option value="bicarbonato">Bicarbonato S√≥dio 8.4%</option>
                            </select>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Valor Atual</label>
                                <input type="number" id="valorAtual" placeholder="0" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>Valor Alvo</label>
                                <input type="number" id="valorAlvo" placeholder="0" step="0.1">
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="calcularEletrolito()">Calcular</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">‚ö° Resultado</div>
                        <div class="results-container">
                            <div id="eletroResult" class="result-box">
                                <div class="result-item">
                                    <span class="result-label">Eletr√≥lito</span>
                                    <span class="result-value" id="nomeDroga">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Valor Atual ‚Üí Alvo</span>
                                    <span class="result-value" id="valoresEletro">-- ‚Üí --</span>
                                </div>
                                <div class="result-item highlight">
                                    <span class="result-label">Dose Necess√°ria</span>
                                    <span class="result-value" id="doseEletro">-- mL</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Dilui√ß√£o Recomendada</span>
                                    <span class="result-value" id="diluicaoEletro">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-title">üìã Valores Normais de Refer√™ncia</div>
                    <div class="results-container">
                        <div class="result-box">
                            <div class="result-item">
                                <span class="result-label">C√°lcio Total</span>
                                <span class="result-value">8.5-10.5 mg/dL</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Pot√°ssio</span>
                                <span class="result-value">3.5-5.0 mEq/L</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Magn√©sio</span>
                                <span class="result-value">1.7-2.2 mg/dL</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Bicarbonato</span>
                                <span class="result-value">22-26 mEq/L</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GASOMETRIA - COMPLETA COM TODOS OS PAR√ÇMETROS -->
            <div id="gasometria" class="section">
                <div class="formula-box">
                    üìê F√≥rmula Corre√ß√£o HCO3: Dose = -BE √ó Peso (kg) √ó 0.3<br>
                    ‚ö†Ô∏è Dar 50% da dose calculada, reavaliar em 1h
                </div>
                <div class="info-box">
                    ü´Å Avalia√ß√£o Completa de Perfus√£o: Lactato, pH, pCO2, BE, Hb, SaO2, SvO2, PvCO2 e c√°lculos derivados
                </div>

                <div class="section-grid">
                    <div class="card">
                        <div class="card-title">ü´Å Par√¢metros Gasom√©tricos</div>
                        
                        <div class="input-row-4">
                            <div class="input-group">
                                <label>Peso (kg)</label>
                                <input type="number" id="pesoGaso" placeholder="70" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>Lactato (mmol/L)</label>
                                <input type="number" id="lactato" placeholder="2" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>pH</label>
                                <input type="number" id="pH" placeholder="7.40" min="6.8" max="7.8" step="0.01">
                            </div>
                            <div class="input-group">
                                <label>PaCO2 (mmHg)</label>
                                <input type="number" id="paCO2" placeholder="40" step="1">
                            </div>
                        </div>

                        <div class="input-row-4">
                            <div class="input-group">
                                <label>Base Excess (mEq/L)</label>
                                <input type="number" id="baseExcess" placeholder="0" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>Hemoglobina (g/dL)</label>
                                <input type="number" id="hemoglobina" placeholder="12" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>SaO2 (%)</label>
                                <input type="number" id="saO2" placeholder="98" min="0" max="100" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>SvO2 (%)</label>
                                <input type="number" id="svO2" placeholder="74.9" min="0" max="100" step="0.1">
                            </div>
                        </div>

                        <div class="input-group">
                            <label>PvCO2 (mmHg)</label>
                            <input type="number" id="pvCO2" placeholder="20" step="1">
                        </div>

                        <div class="button-group">
                            <button class="btn btn-primary" onclick="calcularGasometria()">Avaliar</button>
                            <button class="btn btn-secondary" onclick="limparGaso()">Limpar</button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">ü´Å An√°lise: Perfus√£o & Corre√ß√µes</div>
                        <div id="gasoResult" class="analysis-section">
                            <div class="analysis-title">Avalia√ß√£o de Perfus√£o</div>
                            <div class="analysis-item">
                                <span class="analysis-label">Lactato</span>
                                <span class="analysis-value" id="statusLactato">--</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">pH</span>
                                <span class="analysis-value" id="statusPh">--</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">ŒîAO2</span>
                                <span class="analysis-value" id="deltaAO2">--</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">O2ER (%)</span>
                                <span class="analysis-value" id="o2ER">--</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">ŒîPvCO2 (mmHg)</span>
                                <span class="analysis-value" id="deltaPvCO2">--</span>
                            </div>
                            <div class="analysis-item">
                                <span class="analysis-label">Hemoglobina</span>
                                <span class="analysis-value" id="statusHb">--</span>
                            </div>
                            <div class="analysis-item highlight">
                                <span class="analysis-label">Corre√ß√£o HCO3</span>
                                <span class="analysis-value" id="correcaoHCO3">-- mL</span>
                            </div>
                        </div>
                        
                        <div id="statusGaso" class="status-badge"></div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-title">üìã C√°lculos Derivados - Explica√ß√£o</div>
                    <div class="results-container">
                        <div class="result-box">
                            <div class="result-item">
                                <span class="result-label"><strong>ŒîAO2</strong> (Diferen√ßa Arterio-Venosa)</span>
                                <span class="result-value">F√≥rmula: SaO2 - SvO2</span>
                            </div>
                            <div style="padding: 10px; background: rgba(20,184,166,0.1); border-radius: 8px; margin: 8px 0; font-size: 0.9em; color: var(--text-secondary);">
                                ‚úì Mede a diferen√ßa de oxigena√ß√£o entre sangue arterial e venoso<br>
                                ‚úì Normal: &lt;30% | Elevado: &gt;30% = hipoperfus√£o poss√≠vel
                            </div>
                        </div>
                    </div>
                    <div class="results-container" style="margin-top: 20px;">
                        <div class="result-box">
                            <div class="result-item">
                                <span class="result-label"><strong>O2ER</strong> (Taxa de Extra√ß√£o de O2)</span>
                                <span class="result-value">F√≥rmula: ((SaO2 - SvO2) / SaO2) √ó 100</span>
                            </div>
                            <div style="padding: 10px; background: rgba(20,184,166,0.1); border-radius: 8px; margin: 8px 0; font-size: 0.9em; color: var(--text-secondary);">
                                ‚úì Percentual de O2 extra√≠do pelos tecidos<br>
                                ‚úì Normal: 20-30% | Elevado: &gt;35% = hipoperfus√£o/baixo d√©bito
                            </div>
                        </div>
                    </div>
                    <div class="results-container" style="margin-top: 20px;">
                        <div class="result-box">
                            <div class="result-item">
                                <span class="result-label"><strong>ŒîPvCO2</strong> (Delta CO2 Venoso-Arterial)</span>
                                <span class="result-value">F√≥rmula: PvCO2 - PaCO2</span>
                            </div>
                            <div style="padding: 10px; background: rgba(20,184,166,0.1); border-radius: 8px; margin: 8px 0; font-size: 0.9em; color: var(--text-secondary);">
                                ‚úì Avalia perfus√£o tecidual e produ√ß√£o de CO2<br>
                                ‚úì Normal: &lt;6 mmHg | Elevado: &gt;8 mmHg = hipoperfus√£o significativa
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-title">üìã Interpreta√ß√£o Cl√≠nica</div>
                    <div class="results-container">
                        <div class="result-box">
                            <div class="result-item">
                                <span class="result-label">Interpreta√ß√£o ŒîAO2</span>
                                <span class="result-value" id="interpDeltaAO2">--</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Interpreta√ß√£o O2ER</span>
                                <span class="result-value" id="interpO2ER">--</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Interpreta√ß√£o ŒîPvCO2</span>
                                <span class="result-value" id="interpDeltaPvCO2">--</span>
                            </div>
                            <div class="result-item highlight">
                                <span class="result-label">Status √Åcido-Base</span>
                                <span class="result-value" id="acidBaseStatus">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- C√ÇNULAS - COMPLETA COM ARTERIAL E VENOSA -->
            <div id="canulas" class="section">
                <div class="info-box">
                    ü©∫ Recomenda√ß√£o Completa de C√¢nulas: Arterial e Venosa (VCS/VCI) baseada no peso do paciente
                </div>
                <div class="section-grid">
                    <div class="card">
                        <div class="card-title">ü©∫ Dados do Paciente</div>
                        <div class="input-group">
                            <label>Peso (kg)</label>
                            <input type="number" id="pesoCanula" placeholder="70" step="0.1">
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="calcularCanulas()" style="flex: 1;">Recomendar C√¢nulas</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">ü©∫ Resultado</div>
                        <div class="results-container">
                            <div class="result-box">
                                <div class="result-item">
                                    <span class="result-label">Peso</span>
                                    <span class="result-value" id="pesoCanRes">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Categoria</span>
                                    <span class="result-value" id="categoriaCanula">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-grid">
                    <div class="card">
                        <div class="card-title">üî¥ C√¢nula Arterial</div>
                        <div class="results-container">
                            <div class="result-box">
                                <div class="result-item highlight">
                                    <span class="result-label">Calibre Recomendado</span>
                                    <span class="result-value" id="canulaArterial">--</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">Capacidade de Fluxo</span>
                                    <span class="result-value" id="fluxoArterial">-- mL/min</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">üîµ C√¢nulas Venosas</div>
                        <div class="results-container">
                            <div class="result-box">
                                <div class="result-item">
                                    <span class="result-label">VCS (Veia Cava Superior)</span>
                                    <span class="result-value" id="canulaVCS">-- F</span>
                                </div>
                                <div class="result-item highlight">
                                    <span class="result-label">VCI (Veia Cava Inferior)</span>
                                    <span class="result-value" id="canulaVCI">-- F</span>
                                </div>
                                <div class="result-item" id="extra1Container" style="display:none;">
                                    <span class="result-label">Op√ß√£o Adicional 1</span>
                                    <span class="result-value" id="canulaExtra1">--</span>
                                </div>
                                <div class="result-item" id="extra2Container" style="display:none;">
                                    <span class="result-label">Op√ß√£o Adicional 2</span>
                                    <span class="result-value" id="canulaExtra2">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <div class="card-title">üìä Tabela Refer√™ncia - C√¢nulas por Faixa de Peso</div>
                    <div class="results-container" style="font-size: 0.9em;">
                        <div class="result-box">
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse; color: var(--text-secondary);">
                                    <thead>
                                        <tr style="border-bottom: 2px solid var(--secondary);">
                                            <th style="padding: 12px; text-align: left; color: var(--secondary);">Peso (kg)</th>
                                            <th style="padding: 12px; text-align: left; color: var(--secondary);">Arterial</th>
                                            <th style="padding: 12px; text-align: left; color: var(--secondary);">VCS</th>
                                            <th style="padding: 12px; text-align: left; color: var(--secondary);">VCI</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom: 1px solid rgba(20,184,166,0.2);">
                                            <td style="padding: 10px;">1-5</td>
                                            <td style="padding: 10px;">08F - 500mL</td>
                                            <td style="padding: 10px;">12F</td>
                                            <td style="padding: 10px;">12F</td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid rgba(20,184,166,0.2);">
                                            <td style="padding: 10px;">6-15</td>
                                            <td style="padding: 10px;">08-10F - 1100mL</td>
                                            <td style="padding: 10px;">12F</td>
                                            <td style="padding: 10px;">16F</td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid rgba(20,184,166,0.2);">
                                            <td style="padding: 10px;">16-40</td>
                                            <td style="padding: 10px;">12-14F - 2500mL</td>
                                            <td style="padding: 10px;">16F</td>
                                            <td style="padding: 10px;">20F</td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid rgba(20,184,166,0.2);">
                                            <td style="padding: 10px;">40-70</td>
                                            <td style="padding: 10px;">18F - 3800mL</td>
                                            <td style="padding: 10px;">24F</td>
                                            <td style="padding: 10px;">28F</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 10px;">70+</td>
                                            <td style="padding: 10px;">20-22F - 5800mL</td>
                                            <td style="padding: 10px;">34F</td>
                                            <td style="padding: 10px;">36F</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DROGAS VASOATIVAS -->
            <div id="drogas" class="section">
                <div class="card" style="grid-column: 1 / -1;">
                    <div class="card-title">üíâ Drogas Vasoativas</div>
                    <div class="input-group">
                        <label>Selecione a Droga</label>
                        <select id="selectDroga" onchange="atualizarDroga()">
                            <option value="aramin">Aramin (Metaraminol)</option>
                            <option value="nipride">Nipride (Nitroprussiato)</option>
                            <option value="tridil">Tridil (Nitroglicerina)</option>
                        </select>
                    </div>
                    <div id="drugInfo" class="drug-steps" style="margin-top: 20px;"></div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>ü©∏ Calculadora Perfusionista PRO v7.0 | Desenvolvido com ‚ù§Ô∏è para perfusionistas</p>
            <p style="margin-top: 10px; font-size: 0.85em; opacity: 0.7;">‚ö†Ô∏è Ferramenta auxiliar. Sempre confirme com cirurgi√£o e siga protocolos institucionais.</p>
        </div>
    </div>

    <script>
        const drugs = {
            aramin: {
                name: 'Aramin (Metaraminol)',
                steps: [
                    { title: '1Ô∏è‚É£ Apresenta√ß√£o', text: 'Ampola com 10 mL contendo 10 mg' },
                    { title: '2Ô∏è‚É£ Preparo', text: '10 mL Aramin + 10 mL √Ågua Inje√ß√£o = 20 mL (1 mg/mL)' },
                    { title: '3Ô∏è‚É£ Bolus', text: '1.5 mL' },
                    { title: '4Ô∏è‚É£ Aplica√ß√£o', text: 'Reservat√≥rio CEC' },
                    { title: '5Ô∏è‚É£ Tempo', text: 'Imediato' }
                ]
            },
            nipride: {
                name: 'Nipride (Nitroprussiato)',
                steps: [
                    { title: '1Ô∏è‚É£ Apresenta√ß√£o', text: 'Frasco com 5 mL contendo 50 mg' },
                    { title: '2Ô∏è‚É£ Preparo', text: '5 mL Nipride + 95 mL SG5% = 100 mL (0.5 mg/mL)' },
                    { title: '3Ô∏è‚É£ Bolus', text: '0.5-1.0 mL' },
                    { title: '4Ô∏è‚É£ Aplica√ß√£o', text: 'Reservat√≥rio CEC' },
                    { title: '5Ô∏è‚É£ Tempo', text: '1-2 minutos LENTO' }
                ],
                warning: '‚ö†Ô∏è Proteger da luz (papel alum√≠nio)'
            },
            tridil: {
                name: 'Tridil (Nitroglicerina)',
                steps: [
                    { title: '1Ô∏è‚É£ Apresenta√ß√£o', text: 'Ampola com 1 mL contendo 10 mg' },
                    { title: '2Ô∏è‚É£ Preparo', text: '1 mL Tridil + 90 mL SG5% = 100 mL (0.1 mg/mL)' },
                    { title: '3Ô∏è‚É£ Bolus', text: '0.1-0.2 mL' },
                    { title: '4Ô∏è‚É£ Aplica√ß√£o', text: 'Reservat√≥rio CEC' },
                    { title: '5Ô∏è‚É£ Tempo', text: '1-2 minutos LENTO' }
                ],
                warning: '‚ö†Ô∏è Proteger da luz (papel alum√≠nio)'
            }
        };

        const eletrolitos = {
            calcio: { nome: 'C√°lcio Gluconato 10%', conc: 100, fator: 1, unidade: 'mg/mL', diluicao: 'SF 0,9% ou SG5%' },
            potassio: { nome: 'Pot√°ssio (KCl 19.1%)', conc: 191, fator: 0.5, unidade: 'mg/mL', diluicao: 'M√°ximo 20 mEq/L' },
            magnesio: { nome: 'Magn√©sio (MgSO4 50%)', conc: 500, fator: 0.3, unidade: 'mg/mL', diluicao: 'SF 0,9% lentamente' },
            bicarbonato: { nome: 'Bicarbonato S√≥dio 8.4%', conc: 84, fator: 1, unidade: 'mg/mL', diluicao: 'SF 0,9% lentamente' }
        };

        function showTab(tabName) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function calcularGasometria() {
            const peso = parseFloat(document.getElementById('pesoGaso').value) || 0;
            const pH = parseFloat(document.getElementById('pH').value) || 7.4;
            const paCO2 = parseFloat(document.getElementById('paCO2').value) || 40;
            const baseExcess = parseFloat(document.getElementById('baseExcess').value) || 0;
            const hemoglobina = parseFloat(document.getElementById('hemoglobina').value) || 12;
            const lactato = parseFloat(document.getElementById('lactato').value) || 2;
            const saO2 = parseFloat(document.getElementById('saO2').value) || 98;
            const svO2 = parseFloat(document.getElementById('svO2').value) || 70;
            const pvCO2 = parseFloat(document.getElementById('pvCO2').value) || 46;

            const deltaAO2 = saO2 - svO2;
            const o2ER = saO2 > 0 ? ((saO2 - svO2) / saO2) * 100 : 0;
            const deltaPvCO2 = pvCO2 - paCO2;

            const doseHCO3 = baseExcess < 0 ? Math.abs(baseExcess) * peso * 0.3 : 0;
            const volumeHCO3 = doseHCO3 > 0 ? doseHCO3 / 1.0 : 0;

            let statusLactato = '';
            if (lactato < 2) statusLactato = 'üü¢ 2.0 mmol/L Normal';
            else if (lactato < 4) statusLactato = 'üü° ' + lactato.toFixed(1) + ' mmol/L Elevado';
            else statusLactato = 'üî¥ ' + lactato.toFixed(1) + ' mmol/L Muito Elevado';

            let statusPh = '';
            if (pH < 7.35) statusPh = 'üî¥ ' + pH.toFixed(2) + ' Acidemia';
            else if (pH > 7.45) statusPh = 'üü† ' + pH.toFixed(2) + ' Alcalinemia';
            else statusPh = 'üü¢ ' + pH.toFixed(2) + ' Normal';

            let statusHb = '';
            if (hemoglobina < 10) statusHb = 'üî¥ ' + hemoglobina.toFixed(1) + ' g/dL Anemia Grave';
            else if (hemoglobina < 12) statusHb = 'üü° ' + hemoglobina.toFixed(1) + ' g/dL Anemia Moderada';
            else if (hemoglobina <= 18) statusHb = 'üü¢ ' + hemoglobina.toFixed(1) + ' g/dL Normal';
            else statusHb = 'üü† ' + hemoglobina.toFixed(1) + ' g/dL Policitemia';

            let interpDeltaAO2 = '';
            if (deltaAO2 <= 0) interpDeltaAO2 = '‚ùå Valores inv√°lidos';
            else if (deltaAO2 <= 30) interpDeltaAO2 = 'üü¢ Dentro faixa (<30 pts) - Perfus√£o adequada';
            else interpDeltaAO2 = 'üî¥ Extra√ß√£o aumentada (>30 pts) - Pode indicar hipoperfus√£o';

            let interpO2ER = '';
            if (o2ER < 0 || o2ER > 100) interpO2ER = '‚ùå Valores inv√°lidos';
            else if (o2ER >= 20 && o2ER <= 30) interpO2ER = 'üü¢ Normal (20-30%) - Perfus√£o adequada';
            else if (o2ER > 30 && o2ER <= 35) interpO2ER = 'üü° Elevada (30-35%) - Poss√≠vel hipoperfus√£o';
            else if (o2ER > 35) interpO2ER = 'üî¥ Muito elevada (>35%) - Hipoperfus√£o severa';
            else interpO2ER = 'üü† Extra√ß√£o muito baixa (<20%) - Poss√≠vel hiperfluxo';

            let interpDeltaPvCO2 = '';
            if (deltaPvCO2 < 6) interpDeltaPvCO2 = 'üü¢ Normal (<6 mmHg) - Fluxo adequado';
            else if (deltaPvCO2 >= 6 && deltaPvCO2 < 8) interpDeltaPvCO2 = 'üü° Elevado (6-8 mmHg) - Poss√≠vel baixo d√©bito';
            else interpDeltaPvCO2 = 'üî¥ Muito elevado (‚â•8 mmHg) - Sugere hipoperfus√£o significativa';

            let acidBaseStatus = '';
            if (pH < 7.35 && baseExcess < -2 && paCO2 > 45) acidBaseStatus = 'üî¥ Acidose Mista (Respirat√≥ria + Metab√≥lica)';
            else if (pH < 7.35 && paCO2 > 45) acidBaseStatus = 'üü† Acidose Respirat√≥ria';
            else if (pH < 7.35 && baseExcess < -2) acidBaseStatus = 'üü† Acidose Metab√≥lica';
            else if (pH > 7.45 && baseExcess > 2) acidBaseStatus = 'üü° Alcalose Metab√≥lica';
            else if (pH > 7.45 && paCO2 < 35) acidBaseStatus = 'üü° Alcalose Respirat√≥ria';
            else acidBaseStatus = 'üü¢ Equil√≠brio Normal';

            document.getElementById('statusLactato').textContent = statusLactato;
            document.getElementById('statusPh').textContent = statusPh;
            document.getElementById('statusHb').textContent = statusHb;
            document.getElementById('deltaAO2').textContent = deltaAO2.toFixed(1) + ' pts';
            document.getElementById('o2ER').textContent = o2ER.toFixed(1) + '%';
            document.getElementById('deltaPvCO2').textContent = deltaPvCO2.toFixed(1) + ' mmHg';
            document.getElementById('correcaoHCO3').textContent = volumeHCO3.toFixed(1) + ' mL (50% = ' + (volumeHCO3/2).toFixed(1) + ' mL)';

            document.getElementById('interpDeltaAO2').textContent = interpDeltaAO2;
            document.getElementById('interpO2ER').textContent = interpO2ER;
            document.getElementById('interpDeltaPvCO2').textContent = interpDeltaPvCO2;
            document.getElementById('acidBaseStatus').textContent = acidBaseStatus;

            const statusGasoEl = document.getElementById('statusGaso');
            let avaliacaoGeral = (lactato > 4 || pH < 7.30 || o2ER > 35 || deltaPvCO2 > 8) ? 'critical' : 
                                 (lactato > 2 || pH < 7.35 || o2ER > 30 || deltaPvCO2 > 6) ? 'elevated' : 'ok';
            
            if (avaliacaoGeral === 'critical') {
                statusGasoEl.innerHTML = 'üî¥ ATEN√á√ÉO CR√çTICA - Hipoperfus√£o significativa detectada';
                statusGasoEl.className = 'status-badge critical';
            } else if (avaliacaoGeral === 'elevated') {
                statusGasoEl.innerHTML = 'üü° CUIDADO - Sinais de hipoperfus√£o';
                statusGasoEl.className = 'status-badge elevated';
            } else {
                statusGasoEl.innerHTML = '‚úì PERFUS√ÉO ADEQUADA';
                statusGasoEl.className = 'status-badge ok';
            }
        }

        function limparGaso() {
            document.getElementById('pesoGaso').value = '';
            document.getElementById('lactato').value = '';
            document.getElementById('pH').value = '';
            document.getElementById('paCO2').value = '';
            document.getElementById('baseExcess').value = '';
            document.getElementById('hemoglobina').value = '';
            document.getElementById('saO2').value = '';
            document.getElementById('svO2').value = '';
            document.getElementById('pvCO2').value = '';
            
            document.querySelectorAll('#gasometria .analysis-value, #gasometria .result-value').forEach(el => el.textContent = '--');
            document.getElementById('statusGaso').innerHTML = '';
        }

        function calcularHemodiluicao() {
            const peso = parseFloat(document.getElementById('pesoHemo').value) || 0;
            const htInicial = parseFloat(document.getElementById('htInicial').value) || 0;
            const htFinal = parseFloat(document.getElementById('htFinal').value) || 0;

            if (peso <= 0 || htInicial <= 0 || htFinal <= 0) {
                alert('Preencha todos os campos');
                return;
            }
            if (htFinal >= htInicial) {
                alert('Ht final deve ser menor que inicial');
                return;
            }

            const vst = peso * 70;
            const volumePerfusato = ((htInicial / htFinal) * vst) - vst;
            const perfusatoPerKg = volumePerfusato / peso;

            document.getElementById('pesohemoRes').textContent = peso.toFixed(1) + ' kg';
            document.getElementById('vst').textContent = Math.round(vst) + ' mL';
            document.getElementById('htInicialRes').textContent = htInicial.toFixed(1) + '%';
            document.getElementById('htFinalRes').textContent = htFinal.toFixed(1) + '%';
            document.getElementById('volumePerfusato').textContent = Math.round(volumePerfusato) + ' mL';
            document.getElementById('perfusatoPerKg').textContent = perfusatoPerKg.toFixed(1) + ' mL/kg';

            let faixa = '';
            if (perfusatoPerKg <= 15) faixa = 'üü¢ Excelente';
            else if (perfusatoPerKg <= 20) faixa = 'üü° Bom';
            else if (perfusatoPerKg <= 25) faixa = 'üü† Moderado';
            else faixa = 'üî¥ Alto';

            document.getElementById('faixaSeguranca').textContent = faixa;

            const statusEl = document.getElementById('statusHemo');
            if (perfusatoPerKg <= 20) {
                statusEl.innerHTML = '‚úì SEGURO (‚â§20 mL/kg)';
                statusEl.className = 'status-badge ok';
            } else {
                statusEl.innerHTML = '‚ö†Ô∏è ATEN√á√ÉO (>20 mL/kg)';
                statusEl.className = 'status-badge warning';
            }
        }

        function calcularFurosemida() {
            const peso = parseFloat(document.getElementById('pesoFuro').value) || 0;
            const apresentacao = parseInt(document.getElementById('apresentacaoFuro').value);

            if (peso <= 0) {
                alert('Preencha o peso');
                return;
            }

            const dose = Math.max(40, Math.min(peso * 1.0, 80));
            const volume = dose / apresentacao;

            document.getElementById('doseHabitual').textContent = Math.round(dose) + ' mg';
            document.getElementById('volumeFuro').textContent = volume.toFixed(1) + ' mL';
            document.getElementById('apresentacaoRes').textContent = apresentacao === 10 ? '10mg/mL' : '20mg/mL';
        }

        function calcularManitol() {
            const peso = parseFloat(document.getElementById('pesoManitol').value) || 0;
            const dose = parseFloat(document.getElementById('doseManitol').value) || 0.5;

            if (peso <= 0) {
                alert('Preencha o peso');
                return;
            }

            const doseManitol = peso * dose;
            const volume = doseManitol / 0.2;

            document.getElementById('pesoManitolRes').textContent = peso.toFixed(1) + ' kg';
            document.getElementById('doseManitolRes').textContent = doseManitol.toFixed(1) + ' g';
            document.getElementById('volumeManitol').textContent = Math.round(volume) + ' mL';
        }

        function calcularEletrolito() {
            const peso = parseFloat(document.getElementById('pesoEletro').value) || 0;
            const valorAtual = parseFloat(document.getElementById('valorAtual').value) || 0;
            const valorAlvo = parseFloat(document.getElementById('valorAlvo').value) || 0;
            const tipo = document.getElementById('selectEletro').value;

            if (peso <= 0 || valorAtual === 0) {
                alert('Preencha todos os campos');
                return;
            }

            const eletro = eletrolitos[tipo];
            const diferenca = (valorAlvo - valorAtual) * peso * eletro.fator;
            const volume = Math.abs(diferenca) / eletro.conc;

            document.getElementById('nomeDroga').textContent = eletro.nome;
            document.getElementById('valoresEletro').textContent = valorAtual.toFixed(1) + ' ‚Üí ' + valorAlvo.toFixed(1);
            document.getElementById('doseEletro').textContent = volume.toFixed(1) + ' mL';
            document.getElementById('diluicaoEletro').textContent = eletro.diluicao;
        }

        function calcularCanulas() {
            const peso = parseFloat(document.getElementById('pesoCanula').value) || 0;

            if (peso <= 0) {
                alert('Preencha o peso');
                return;
            }

            let arterial = '', categoria = '', vcs = '', vci = '', extra1 = '', extra2 = '', fluxo = '';

            if (peso <= 5) { 
                arterial = '08F - 500 mL'; 
                categoria = 'Pequenos';
                vcs = '12F';
                vci = '12F';
                fluxo = '500 mL/min';
            } 
            else if (peso <= 15) { 
                arterial = '08-10F - 500-1100 mL'; 
                categoria = 'Pedi√°tricos';
                vcs = '12F';
                vci = '16F';
                fluxo = '1100 mL/min';
            } 
            else if (peso <= 40) { 
                arterial = '12-14F - 1800-2500 mL'; 
                categoria = 'Adolescentes';
                vcs = '16F';
                vci = '20F';
                fluxo = '2500 mL/min';
            } 
            else if (peso <= 70) { 
                arterial = '18F - 3800 mL'; 
                categoria = 'Adultos';
                vcs = '24F';
                vci = '28F';
                fluxo = '3800 mL/min';
                extra1 = '2E 32/40';
                extra2 = '3E 28/28/28';
            } 
            else { 
                arterial = '20-22F - 4700-5800 mL'; 
                categoria = 'Grandes adultos';
                vcs = '34F';
                vci = '36F';
                fluxo = '5800 mL/min';
                extra1 = '2E 36/46';
                extra2 = '3E 28/36/36';
            }

            document.getElementById('pesoCanRes').textContent = peso.toFixed(1) + ' kg';
            document.getElementById('categoriaCanula').textContent = categoria;
            document.getElementById('canulaArterial').textContent = arterial;
            document.getElementById('fluxoArterial').textContent = fluxo;
            document.getElementById('canulaVCS').textContent = vcs;
            document.getElementById('canulaVCI').textContent = vci;

            if (extra1) {
                document.getElementById('extra1Container').style.display = 'flex';
                document.getElementById('canulaExtra1').textContent = extra1;
            } else {
                document.getElementById('extra1Container').style.display = 'none';
            }

            if (extra2) {
                document.getElementById('extra2Container').style.display = 'flex';
                document.getElementById('canulaExtra2').textContent = extra2;
            } else {
                document.getElementById('extra2Container').style.display = 'none';
            }
        }

        function atualizarDroga() {
            const drugKey = document.getElementById('selectDroga').value;
            const drug = drugs[drugKey];

            let html = '';
            drug.steps.forEach(step => {
                html += `<div class="drug-step"><strong>${step.title}</strong>${step.text}</div>`;
            });

            if (drug.warning) {
                html += `<div class="drug-warning">${drug.warning}</div>`;
            }

            document.getElementById('drugInfo').innerHTML = html;
        }

        function atualizarEletrolito() {}

        function limparHemo() {
            document.getElementById('pesoHemo').value = '';
            document.getElementById('htInicial').value = '';
            document.getElementById('htFinal').value = '';
            document.querySelectorAll('#hemodiluicao .result-value').forEach(el => el.textContent = '--');
            document.getElementById('statusHemo').innerHTML = '';
        }

        atualizarDroga();
    </script>
</body>
</html>
